var test    = require('tape');
var TypeMap = require('../lib/TypeMap.js');

test('basic get set', function(t) {
  t.plan(5);

  function A() { }
  function B() { }

  var m = new TypeMap();
  m.set(A, 1);
  t.strictEqual(m.get(A), 1);
  m.set(B, 2);
  t.strictEqual(m.get(A), 1);
  t.strictEqual(m.get(B), 2);
  m.set(A, 3);
  t.strictEqual(m.get(A), 3);
  t.strictEqual(m.get(B), 2);
});

test('api', function(t) {
  t.plan(3);
  t.strictEqual(TypeMap, require('../lib/TypeMap.js'));
  t.ok(new TypeMap() instanceof TypeMap);

  var typemap = TypeMap;
  t.ok(typemap() instanceof TypeMap);
});

test('each', function(t) {
  t.plan(2);

  function A() { }
  function B() { }

  var m = new TypeMap();
  m.set(A, 1);
  m.set(B, 2);

  m.each(function(value, key) {
    if (key === A && value === 1)
      t.pass();
    if (key === B && value === 2)
      t.pass();
  });

});
